{% sw_extends '@Storefront/storefront/layout/meta.html.twig' %}

{% block layout_head_javascript_tracking %}
  <script>
    document.addEventListener('ffReady', function (e) {
      e.factfinder.communication.fieldRoles = {{ factfinder.field_roles|json_encode|raw }};
    });
  </script>
  <script src="{{ asset('ff-web-components/vendor/custom-elements-es5-adapter.js', '@OmikronFactFinder') }}"></script>
  <script src="{{ asset('ff-web-components/vendor/webcomponents-loader.js', '@OmikronFactFinder') }}"></script>
  <script src="{{ asset('ff-web-components/bundle.js', '@OmikronFactFinder') }}" defer></script>
  <style>[unresolved]{display:none}</style>

  {% block layout_head_factfinder_search_redirect %}
    <script>
      document.addEventListener('before-search', function (event) {
        if (['productDetail', 'getRecords'].lastIndexOf(event.detail.type) === -1) {
          event.preventDefault();
          delete event.detail.type;
          window.location = '{{ path('frontend.factfinder.result') }}' + factfinder.common.dictToParameterString(event.detail);
        }
      });
    </script>
  {% endblock %}

  {{ parent() }}
{% endblock %}
