"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["omikron_shopware6-factfinder_src_Resources_app_storefront_src_plugin_tracking_plugin_js"],{404:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var a=r(568),n=r(49);class i extends a.Z{init(){this.registerEvents()}registerEvents(){window.PluginManager.getPluginInstances("AddToCart").forEach(e=>e.$emitter.subscribe("beforeFormSubmit",this.trackAddToCart.bind(this)))}getQuantity(e){if("count_as_one"===ffTrackingSettings.addToCart.count)return 1;try{let t=n.Z.querySelector(e,'[name$="[quantity]"]');return parseInt(t.value)}catch(e){return 1}}async trackAddToCart(e){let t=n.Z.querySelector(e.target,'[name="product-number"]'),r=this.getQuantity(e.target);t&&new Promise(e=>{void 0!==window.factfinder?e(window.factfinder):document.addEventListener("ffCoreReady",t=>e(t.factfinder))}).then(e=>{e.request.records({productNumber:[t.value]}).then(t=>{let a=t.records[0],n=e.config.get().ffParams?e.config.get().ffParams.userId:void 0,i={id:a.ProductNumber,masterId:a.Master,price:a.Price,title:a.Name,count:r,sid:JSON.parse(localStorage.ffwebco).sid};n&&(i.userId=n),e.tracking.cart([i])})})}}}}]);