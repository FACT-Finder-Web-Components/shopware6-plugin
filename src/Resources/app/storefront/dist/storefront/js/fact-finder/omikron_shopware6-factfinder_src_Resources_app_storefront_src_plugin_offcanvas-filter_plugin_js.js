"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["omikron_shopware6-factfinder_src_Resources_app_storefront_src_plugin_offcanvas-filter_plugin_js"],{894:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});class n{static isTouchDevice(){return"ontouchstart"in document.documentElement}static isIOSDevice(){return n.isIPhoneDevice()||n.isIPadDevice()}static isNativeWindowsBrowser(){return n.isIEBrowser()||n.isEdgeBrowser()}static isIPhoneDevice(){return!!navigator.userAgent.match(/iPhone/i)}static isIPadDevice(){return!!navigator.userAgent.match(/iPad/i)}static isIEBrowser(){return -1!==navigator.userAgent.toLowerCase().indexOf("msie")||!!navigator.userAgent.match(/Trident.*rv:\d+\./)}static isEdgeBrowser(){return!!navigator.userAgent.match(/Edge\/\d+/i)}static getList(){return{"is-touch":n.isTouchDevice(),"is-ios":n.isIOSDevice(),"is-native-windows":n.isNativeWindowsBrowser(),"is-iphone":n.isIPhoneDevice(),"is-ipad":n.isIPadDevice(),"is-ie":n.isIEBrowser(),"is-edge":n.isEdgeBrowser()}}}var i=s(830);class a{static iterate(e,t){if(e instanceof Map||Array.isArray(e))return e.forEach(t);if(e instanceof FormData){for(var s of e.entries())t(s[1],s[0]);return}if(e instanceof NodeList)return e.forEach(t);if(e instanceof HTMLCollection)return Array.from(e).forEach(t);if(e instanceof Object)return Object.keys(e).forEach(s=>{t(e[s],s)});throw Error("The element type ".concat(typeof e," is not iterable!"))}}let o="offcanvas";class r{open(e,t,s,n,i,a,o){this._removeExistingOffCanvas();let r=this._createOffCanvas(s,a,o,n);this.setContent(e,n,i),this._openOffcanvas(r,t)}setContent(e,t){let s=this.getOffCanvas();s[0]&&(s[0].innerHTML=e,this._registerEvents(t))}setAdditionalClassName(e){this.getOffCanvas()[0].classList.add(e)}getOffCanvas(){return document.querySelectorAll(".".concat(o))}close(e){let t=this.getOffCanvas();a.iterate(t,e=>{bootstrap.Offcanvas.getInstance(e).hide()}),setTimeout(()=>{this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:t})},e)}goBackInHistory(){window.history.back()}exists(){return this.getOffCanvas().length>0}_openOffcanvas(e,t){r.bsOffcanvas.show(),window.history.pushState("offcanvas-open",""),"function"==typeof t&&t()}_registerEvents(e){let t=n.isTouchDevice()?"touchend":"click",s=this.getOffCanvas();a.iterate(s,t=>{let n=()=>{setTimeout(()=>{t.remove(),this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:s})},e),t.removeEventListener("hide.bs.offcanvas",n)};t.addEventListener("hide.bs.offcanvas",n)}),window.addEventListener("popstate",this.close.bind(this,e),{once:!0});let i=document.querySelectorAll(".".concat("js-offcanvas-close"));a.iterate(i,s=>s.addEventListener(t,this.close.bind(this,e)))}_removeExistingOffCanvas(){r.bsOffcanvas=null;let e=this.getOffCanvas();return a.iterate(e,e=>e.remove())}_getPositionClass(e){return"left"===e?"offcanvas-start":"right"===e?"offcanvas-end":"offcanvas-".concat(e)}_createOffCanvas(e,t,s,n){let i=document.createElement("div");if(i.classList.add(o),i.classList.add(this._getPositionClass(e)),!0===t&&i.classList.add("is-fullwidth"),s){let e=typeof s;if("string"===e)i.classList.add(s);else if(Array.isArray(s))s.forEach(e=>{i.classList.add(e)});else throw Error('The type "'.concat(e,'" is not supported. Please pass an array or a string.'))}return document.body.appendChild(i),r.bsOffcanvas=new bootstrap.Offcanvas(i,{backdrop:!1!==n||"static"}),i}constructor(){this.$emitter=new i.Z}}let c=Object.freeze(new r);class l{static open(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",n=!(arguments.length>3)||void 0===arguments[3]||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";c.open(e,t,s,n,i,a,o)}static setContent(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;c.setContent(e,t,s)}static setAdditionalClassName(e){c.setAdditionalClassName(e)}static close(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:350;c.close(e)}static exists(){return c.exists()}static getOffCanvas(){return c.getOffCanvas()}static REMOVE_OFF_CANVAS_DELAY(){return 350}}var f=s(568),d=s(49);class v extends f.Z{init(){this._registerEventListeners()}_registerEventListeners(){this.el.addEventListener("click",this._onClickOffCanvasFilter.bind(this))}_onCloseOffCanvas(e){let t=e.detail.offCanvasContent[0];document.querySelector('[data-off-canvas-filter-content="true"]').innerHTML=t.innerHTML,document.$emitter.unsubscribe("onCloseOffcanvas",this._onCloseOffCanvas.bind(this)),window.PluginManager.getPluginInstances("Listing")[0].refreshRegistry()}_onClickOffCanvasFilter(e){e.preventDefault();let t=document.querySelector('[data-off-canvas-filter-content="true"]');if(!t)throw Error('There was no DOM element with the data attribute "data-offcanvas-filter-content".');l.open(t.innerHTML,()=>{},"bottom",!0,l.REMOVE_OFF_CANVAS_DELAY(),!0,"offcanvas-filter"),d.Z.querySelector(t,".filter-panel").remove(),window.PluginManager.getPluginInstances("Listing")[0].refreshRegistry(),document.$emitter.subscribe("onCloseOffcanvas",this._onCloseOffCanvas.bind(this)),this.$emitter.publish("onClickOffCanvasFilter")}}class u extends v{_onCloseOffCanvas(e){setTimeout(()=>{let t=e.detail.offCanvasContent&&e.detail.offCanvasContent[0];if(!t)throw Error("There was nothing passed as `event.detail.offCanvasContent` in the `onCloseOffcanvas` event");this._toggleASNMobileMode(t.querySelector("ff-asn")),document.querySelector("#filtersOrigin").appendChild(t)}),document.$emitter.unsubscribe("onCloseOffcanvas",this._onCloseOffCanvas.bind(this))}_onClickOffCanvasFilter(e){e.preventDefault();let t=document.querySelector('[data-offcanvas-filter-content="true"]');if(this._toggleASNMobileMode(t.querySelector("ff-asn")),!t)throw Error('There was no DOM element with the data attribute "data-offcanvas-filter-content".');l.open("",()=>{},"bottom",!0,l.REMOVE_OFF_CANVAS_DELAY(),!0,"offcanvas-filter"),setTimeout(()=>{document.querySelector(".offcanvas").appendChild(t)}),document.$emitter.subscribe("onCloseOffcanvas",this._onCloseOffCanvas.bind(this)),this.$emitter.publish("onClickOffCanvasFilter")}_toggleASNMobileMode(e){let t=e=>t=>s=>t.classList[e](...s),s=t("add"),n=t("remove");e.querySelectorAll("ff-asn-group").forEach(e=>{let i=e.querySelector('[slot="groupCaption"]'),a=e.querySelectorAll("ff-asn-group-element"),o=[this.ASNGroupMobileClass,"btn-block"];e.classList.contains(this.ASNGroupMobileClass)?t(e)(o):s(e)(o),i.classList.contains("btn-block")?n(i)(["btn-block"]):s(i)(["btn-block"]),a.forEach(e=>{e.classList.contains(this.ASNGroupElementMobileClass)?n(e)([this.ASNGroupElementMobileClass]):s(e)([this.ASNGroupElementMobileClass])})})}constructor(...e){super(...e),this.ASNMobileClass="ffw-asn-vertical",this.ASNGroupMobileClass="ffw-asn-group-vertical",this.ASNGroupElementMobileClass="ffw-asn-group-element-vertical"}}}}]);